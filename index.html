<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ü–ª–µ–µ—Ä Avtoradio</title>
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Font Awesome -->
  <link rel="stylesheet" href="assets/fonts/all.min.css">
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É hls.js -->
  <script src="/vendor/hls.js"></script>
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ —Å—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="/style.css">
  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#1a1a1a">
  <link rel="apple-touch-icon" href="/assets/icon-192x192.png">
  <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è Apple —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Avtoradio">
</head>

<body>
  <div class="container">
    <div class="player-toggle" role="tablist" aria-label="–í—ã–±–æ—Ä –ø–ª–µ–µ—Ä–∞">
      <div class="toggle-container">
        <button type="button" role="tab" class="toggle-button" data-player="radio" aria-selected="true"
          tabindex="0">–†–∞–¥–∏–æ–ø–ª–µ–π–µ—Ä</button>
        <button type="button" role="tab" class="toggle-button" data-player="video" aria-selected="false"
          tabindex="-1">–í–∏–¥–µ–æ–ø–ª–µ–π–µ—Ä</button>
      </div>
    </div>
    <div class="player-container">
      <h1 class="player-title">–ê–≤—Ç–æ—Ä–∞–¥–∏–æ</h1>
      <!-- Radio -->
      <div class="radio player" role="tabpanel" aria-labelledby="radio-tab">
        <button id="playButton" class="play-btn" aria-label="–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏" title="–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏/–ü–∞—É–∑–∞">
          <span aria-hidden="true">‚ñ∂</span>
        </button>
        <div class="controls-container">
          <button id="muteButton" class="volume-btn" aria-label="–û—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫" title="–û—Ç–∫–ª—é—á–∏—Ç—å/–í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫">
            <i class="fas fa-volume-up" aria-hidden="true"></i>
          </button>
          <div class="volume-slider-container">
            <label for="volumeSlider" class="sr-only">–ì—Ä–æ–º–∫–æ—Å—Ç—å</label>
            <input type="range" id="volumeSlider" class="volume-slider" min="0" max="1" step="0.01" value="1"
              aria-label="–†–µ–≥—É–ª—è—Ç–æ—Ä –≥—Ä–æ–º–∫–æ—Å—Ç–∏">
          </div>
        </div>

        <div class="status-indicators" role="group" aria-label="–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è">
          <div id="networkStatus" class="status-indicator">
            <div class="status-dot" aria-hidden="true"></div>
            <div class="status-text">–°–µ—Ç—å</div>
          </div>
          <div id="playStatus" class="status-indicator playing">
            <div class="status-dot" aria-hidden="true"></div>
            <div class="status-text">–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ</div>
          </div>
          <div id="soundStatus" class="status-indicator">
            <div class="status-text">–ó–≤—É–∫</div>
          </div>
        </div>
        <!-- /Radio -->
      </div>

      <!-- Video   -->
      <div class="video player" role="tabpanel" aria-labelledby="video-tab" hidden></div>
      <!-- /Video -->
    </div>
  </div>
  <audio id="radioPlayer" style="display: none;" preload="none" playsinline webkit-playsinline
    aria-label="–ê—É–¥–∏–æ–ø–ª–µ–µ—Ä"></audio>

  <!-- –≠–ª–µ–º–µ–Ω—Ç –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è -->
  <div id="toast" class="toast" role="alert" aria-live="polite"></div>

  <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ª–∞–¥–∫–∏  -->
  <button id="debugButton"
    style="position: fixed; bottom: 10px; right: 10px; width: 40px; height: 40px; border-radius: 50%; background: rgba(0,0,0,0.3); border: none; color: white; font-size: 20px; cursor: pointer; z-index: 9999; display: none;"
    title="–û—Ç–∫—Ä—ã—Ç—å –ª–æ–≥–∏" aria-label="–û—Ç–∫—Ä—ã—Ç—å –∂—É—Ä–Ω–∞–ª –æ—Ç–ª–∞–¥–∫–∏" onclick="window.showRadioLogs()">üîç</button>

  <!-- Main application entry point -->
  <script type="module" src="/src/main.js"></script>

  <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            // console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —Å –æ–±–ª–∞—Å—Ç—å—é:', registration.scope);
          })
          .catch(error => {
            console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
          });
      });
    }

    // –í–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫—É –æ—Ç–ª–∞–¥–∫–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å: window.enableDebugButton()
    window.enableDebugButton = () => {
      const btn = document.getElementById('debugButton');
      if (btn) {
        btn.style.display = 'block';
        console.log('üîç Debug button enabled! Click to view logs');
      }
    };
  </script>
</body>

</html>